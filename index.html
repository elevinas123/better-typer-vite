<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
   (async function() {
      const publicId = "AUbpqLcrz0c0beB";
      const scriptId = "0a73890d-f8d1-463a-9e86-195da2c8c5bf";

      try {
         const response = await fetch(`http://localhost:3001/api/v1/session/generate?publicId=${publicId}&scriptId=${scriptId}`, {
            method: "GET",
            headers: {
               "Content-Type": "application/json",
               "Referer": window.location.href,  // ✅ Send Referer manually
               "Origin": window.location.origin  // ✅ Send Origin manually
            },
            credentials: "include"  // ✅ Ensures cookies and CORS credentials are sent
         });

         if (!response.ok) throw new Error("Failed to fetch chatbot script");

         const scriptContent = await response.text(); // Get JS as a string
         const script = document.createElement("script");
         script.textContent = scriptContent;  // ✅ Inject into page
         document.head.appendChild(script);
      } catch (error) {
         console.error("Error loading chatbot:", error);
      }
   })();
</script>


  </body>
</html>
